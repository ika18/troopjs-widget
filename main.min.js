define("troopjs-widget/version",[],{toString:function(){}}),define("troopjs-widget/config",["troopjs-dom/config","module","mu-merge/main"],function(a,b,c){var d={$weft:"$weft",weave:"data-weave",unweave:"data-unweave",woven:"data-woven"};return c.call({},a,{widget:d},b.config())}),define("troopjs-widget/weave",["./config","troopjs-core/component/signal/start","require","when/when","jquery","mu-getargs/main"],function(a,b,c,d,e,f){function g(a,g){function k(a){return w.hasOwnProperty(a)?w[a]:a}for(var q,t,u,v=this,w=v.data(),x=w.hasOwnProperty(p)?w[p]:w[p]=[],y=/[\s,]*(((?:\w+!)?([\w\/\.\-]+)(?:#[^(\s]+)?)(?:\((.*?)\))?)/g,z=[];(u=y.exec(a))!==i;)l.call(z,q=[v,u[3]]),q[n]=u[2],(t=u[4])!==h&&l.apply(q,f.call(t).map(k)),l.call(x,(q[m]=d.defer()).promise),l.apply(q,g);return d.map(z,function(a){var f=a[m],g=f.resolve,h=f.reject;return c([a[n]],function(c){var f,i=c.apply(c,a);i.constructor._getBases?(f=e.Deferred(),d(f)["yield"](i).then(g,h),i.start(f)):b.call(i)["yield"](i).then(g,h)},h),f.promise}).tap(function(a){if(0!==a[o]){var b=a.map(function(a){return a.toString()});v.attr(r,function(a,c){var d=(c===h?j:c.split(s)).concat(b);return 0!==d[o]?d.join(" "):i})}})}var h,i=null,j=Array.prototype,k=j.map,l=j.push,m="deferred",n="module",o="length",p=a.widget.$weft,q=a.widget.weave,r=a.widget.woven,s=/[\s,]+/;return function(){var a=arguments;return d.all(k.call(this,function(b){var c=e(b),d=c.attr(q)||"";return c.removeAttr(q),g.call(c,d,a)}))}}),define("troopjs-widget/unweave",["./config","troopjs-core/component/signal/finalize","when/when","jquery"],function(a,b,c,d){function e(a,e){for(var i,m=this,o=m.data(),p=o.hasOwnProperty(k)?o[k]:o[k]=[],q=/[\s,]*([\w\/\.\-]+)(?:@(\d+))?/g,r=[],s=0;(i=q.exec(a))!==g;)r[s++]="^"+i[1]+"@"+(i[2]||"\\d+")+"$";return q=new RegExp(r.join("|")),c.filter(p,function(a,f){if(!q.test(a.toString()))return!1;var g,h=c.defer(),i=h.resolve,j=h.reject,k=p[f]=h.promise;return a.trigger?(g=d.Deferred(),c(g)["yield"](a).then(i,j),a.stop(g)):b.apply(a,e)["yield"](a).then(i,j),k.tap(function(){delete p[f]})["yield"](!0)}).tap(function(a){function b(a){return!c.test(a)}if(0!==a[j]){var c=new RegExp(a.map(function(a){return"^"+a.toString()+"$"}).join("|"));m.attr(l,function(a,c){var d=(c===f?h:c.split(n)).filter(b);return 0!==d[j]?d.join(" "):g})}})}var f,g=null,h=Array.prototype,i=h.map,j="length",k=a.widget.$weft,l=a.widget.woven,m=a.widget.unweave,n=/[\s,]+/;return function(){var a=arguments;return c.all(i.call(this,function(b){var c=d(b),f=c.attr(m)||"";return c.removeAttr(m),e.call(c,f,a)}))}}),define("troopjs-widget/woven",["./config","when/when","jquery"],function(a,b,c){var d=null,e=Array.prototype.map,f="length",g=a.widget.$weft,h=/.*/,i=/([\w\/\.\-]+)(?:@(\d+))?/;return function(){var a=arguments[f]>0?new RegExp(e.call(arguments,function(a){var b;return(b=i.exec(a))!==d?"^"+b[1]+"@"+(b[2]||"\\d+")+"$":d}).filter(function(a){return a!==d}).join("|")):h;return b.all(e.call(this,function(d){return b.filter(c.data(d,g)||!1,function(b){return a.test(b)})}))}}),define("troopjs-widget/component",["troopjs-dom/component","./config","./weave","./unweave","./woven"],function(a,b,c,d,e){var f=Array.prototype.slice,g="$element",h="["+b.widget.weave+"]",i="["+b.widget.woven+"]",j=b.phase.finalize;return a.extend({displayName:"widget/component","sig/render":function(a){return c.apply(a.find(h).addBack(h),f.call(arguments,1))},"dom/destroy":function(){this.phase!==j&&d.call(this[g])},weave:function(){return c.apply(this[g].find(h),f.call(arguments))},unweave:function(){return d.apply(this[g].find(i),arguments)},woven:function(){return e.apply(this[g].find(i),arguments)}})}),define("troopjs-hub/config",["troopjs-core/config","module","mu-merge/main"],function(a,b,c){var d={memory:"memory"};return c.call({},a,{emitter:d},b.config())}),define("troopjs-hub/executor",["./config","when/when"],function(a,b){var c,d=Object.prototype.toString,e=Array.prototype.slice,f="[object Arguments]",g="[object Array]",h=a.phase.skip,i=a.emitter.scope,j=a.emitter.callback,k=a.emitter.head,l=a.emitter.next,m=a.emitter.memory,n="phase";return function(a,o,p){var q,r=[],s=0,t=a[i],u=a[j];for(q=o[k];q!==c;q=q[l])u&&q[j]!==u||t&&q[i]!==t||(r[s++]=q);return b.reduce(r,function(a,j){var k=j[i];return k!==c&&h.test(k[n])?a:b(j.handle(a),function(b){if(b===c)return a;switch(d.call(b)){case f:return e.call(b);case g:return b;default:return[b]}})},p).tap(function(a){o[m]=a})}}),define("troopjs-hub/emitter",["troopjs-core/emitter/composition","./config","./executor"],function(a,b,c){var d,e=b.emitter.memory,f=b.emitter.handlers,g=b.emitter.executor;return a.create(function(a,b){var c=this;return c[a]=b,c}.call({displayName:"hub/emitter",peek:function(a,b){var c;return(c=this[f][a])!==d&&c.hasOwnProperty(e)?c[e]:b}},g,c))}),define("troopjs-widget/application",["./component","troopjs-core/component/signal/initialize","troopjs-core/component/signal/start","troopjs-core/component/signal/stop","troopjs-core/component/signal/finalize","troopjs-hub/emitter","when/when"],function(a,b,c,d,e,f,g){var h=Array.prototype.slice,i="components";return a.extend(function(){this[i]=h.call(arguments,2)},{displayName:"widget/application","sig/initialize":function(){var a=arguments;return g.map(this[i],function(c){return b.apply(c,a)})},"sig/start":function(){var a=this,b=arguments;return g.map(a[i],function(a){return c.apply(a,b)}).then(function(){return a.weave.apply(a,b)}).then(function(){return f.emit("application/start",a)})},"sig/stop":function(){var a=this,b=arguments;return a.unweave.apply(a,b).then(function(){return g.map(a[i],function(a){return d.apply(a,b)})}).then(function(){return f.emit("application/stop",a)})},"sig/finalize":function(){var a=arguments;return g.map(this[i],function(b){return e.apply(b,a)})},start:c,stop:e})}),define("troopjs-widget/plugin",["jquery","when/when","./config","./weave","./unweave","./woven"],function(a,b,c,d,e,f){function g(b){return a(b).attr(n)!==h}var h,i=a.fn,j=a.expr,k="weave",l="unweave",m="woven",n=c.widget.woven;j[":"][m]=j.createPseudo(function(b){if(b===h)return g;for(var c,d=/[\s,]*([\w\d_\/\.\-]+)(?:@(\d+))?/g,e=[],f=0;null!==(c=d.exec(b));)e[f++]="(?:^|[\\s,]+)"+c[1]+"@"+(c[2]||"\\d+")+"($|[\\s,]+)";return d=new RegExp(e.join("|")),function(b){var c=a.attr(b,n);return c!==h&&d.test(c)}}),i[k]=d,i[l]=e,i[m]=f}),define(["troopjs-widget/version"],function(a){return a});