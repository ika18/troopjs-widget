define("troopjs-widget/version",[],{toString:function(){}}),define("troopjs-widget/config",["troopjs-dom/config","module","mu-merge"],function(a,b,c){return c.call(a,{$weft:"$weft",weave:"data-weave",unweave:"data-unweave",woven:"data-woven"},b.config())}),define("troopjs-widget/weave",["./config","troopjs-core/component/signal/start","require","when","jquery","mu-getargs","poly/array"],function(a,b,c,d,e,f){var g,h=null,i=Array.prototype,j=i.map,k=i.push,l="deferred",m="module",n="length",o=a.$weft,p=a.weave,q=a.woven,r=/[\s,]+/;return function(){var a=function(a){for(var j,p,t,u=this,v=function(a){return w.hasOwnProperty(a)?w[a]:a},w=u.data(),x=w.hasOwnProperty(o)?w[o]:w[o]=[],y=/[\s,]*(((?:\w+!)?([\w\/\.\-]+)(?:#[^(\s]+)?)(?:\((.*?)\))?)/g,z=[];(t=y.exec(a))!==h;)k.call(z,j=[u,t[3]]),j[m]=t[2],(p=t[4])!==g&&k.apply(j,f.call(p).map(v)),k.call(x,(j[l]=d.defer()).promise);return d.map(z,function(a){var f=a[l],g=f.resolve,h=f.reject;return c([a[m]],function(c){var f,i;f=c.apply(c,a),f.trigger?(i=e.Deferred(),d(i).yield(f).then(g,h),b.call(f,i)):b.apply(f,s).yield(f).then(g,h)},h),f.promise}).tap(function(a){if(0!==a[n]){var b=a.map(function(a){return a.toString()});u.attr(q,function(a,c){var d=(c===g?i:c.split(r)).concat(b);return 0!==d[n]?d.join(" "):h})}})},s=arguments;return d.all(j.call(this,function(b){var c=e(b),d=c.attr(p)||"";return c.removeAttr(p),a.call(c,d)}))}}),define("troopjs-widget/unweave",["./config","troopjs-core/component/signal/stop","when","jquery","poly/array"],function(a,b,c,d){var e,f=null,g=Array.prototype,h=g.map,i="length",j=a.$weft,k=a.woven,l=a.unweave,m=/[\s,]+/;return function(){var a=function(a){for(var h,l=this,o=l.data(),p=o.hasOwnProperty(j)?o[j]:o[j]=[],q=/[\s,]*([\w\/\.\-]+)(?:@(\d+))?/g,r=[],s=0;(h=q.exec(a))!==f;)r[s++]="^"+h[1]+"@"+(h[2]||"\\d+")+"$";return q=new RegExp(r.join("|")),c.filter(p,function(a,e){if(!q.test(a.toString()))return!1;var f,g=c.defer(),h=g.resolve,i=g.reject,j=p[e]=g.promise;return a.trigger?(f=d.Deferred(),c(f).then(h,i),b.call(a,f)):b.apply(a,n).then(h,i),j.tap(function(){delete p[e]}).yield(!0)}).tap(function(a){if(0!==a[i]){var b=new RegExp(a.map(function(a){return"^"+a.toString()+"$"}).join("|")),c=function(a){return!b.test(a)};l.attr(k,function(a,b){var d=(b===e?g:b.split(m)).filter(c);return 0!==d[i]?d.join(" "):f})}})},n=arguments;return c.all(h.call(this,function(b){var c=d(b),e=c.attr(l)||"";return c.removeAttr(l),a.call(c,e)}))}}),define("troopjs-widget/woven",["./config","when","jquery","poly/array"],function(a,b,c){var d=null,e=Array.prototype.map,f="length",g=a.$weft,h=/.*/,i=/([\w\/\.\-]+)(?:@(\d+))?/;return function(){var a=arguments[f]>0?new RegExp(e.call(arguments,function(a){var b;return(b=i.exec(a))!==d?"^"+b[1]+"@"+(b[2]||"\\d+")+"$":d}).filter(function(a){return a!==d}).join("|")):h;return b.all(e.call(this,function(d){return b.filter(c.data(d,g)||!1,function(b){return a.test(b)})}))}}),define("troopjs-widget/component",["troopjs-dom/component","./config","./weave","./unweave","./woven"],function(a,b,c,d,e){function f(){return c.apply(this[g].find(h),arguments)}var g="$element",h="["+b.weave+"]",i="["+b.woven+"]";return a.extend({displayName:"widget/component","sig/render":f,"dom/destroy":function(){"finalize"!==this.phase&&d.call(this[g])},weave:f,unweave:function(){return d.apply(this[g].find(i),arguments)},woven:function(){return e.apply(this[g].find(i),arguments)}})}),define("troopjs-widget/application",["./component","troopjs-core/component/signal/initialize","troopjs-core/component/signal/start","troopjs-core/component/signal/stop","troopjs-core/component/signal/finalize","when"],function(a,b,c,d,e,f){var g=Array.prototype.slice,h="components";return a.extend(function(){this[h]=g.call(arguments,2)},{displayName:"widget/application","sig/initialize":function(){var a=arguments;return f.map(this[h],function(c){return b.apply(c,a)})},"sig/start":function(){var a=this,b=arguments;return f.map(a[h],function(a){return c.apply(a,b)}).then(function(){return a.weave.apply(a,b)})},"sig/stop":function(){var a=this,b=arguments;return a.unweave.apply(a,b).then(function(){return f.map(a[h],function(a){return d.apply(a,b)})})},"sig/finalize":function(){var a=arguments;return f.map(this[h],function(b){return e.apply(b,a)})}})}),define("troopjs-widget/plugin",["jquery","when","./config","./weave","./unweave","./woven","poly/array"],function(a,b,c,d,e,f){function g(b){return a(b).attr(n)!==h}var h,i=a.fn,j=a.expr,k="weave",l="unweave",m="woven",n=c[m];j[":"][m]=j.createPseudo(function(b){if(b===h)return g;for(var c,d=/[\s,]*([\w\d_\/\.\-]+)(?:@(\d+))?/g,e=[],f=0;null!==(c=d.exec(b));)e[f++]="(?:^|[\\s,]+)"+c[1]+"@"+(c[2]||"\\d+")+"($|[\\s,]+)";return d=new RegExp(e.join("|")),function(b){var c=a.attr(b,n);return c!==h&&d.test(c)}}),i[k]=d,i[l]=e,i[m]=f});