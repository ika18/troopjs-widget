define("troopjs-widget/version",[],{toString:function(){}}),define("troopjs-widget/config",["troopjs-dom/config","module","mu-merge"],function(a,b,c){var d={$weft:"$weft",weave:"data-weave",unweave:"data-unweave",woven:"data-woven"};return c.call({},a,{widget:d},b.config())}),define("troopjs-widget/weave",["./config","troopjs-core/component/signal/start","require","when","jquery","mu-getargs","poly/array"],function(a,b,c,d,e,f){function g(a,g){for(var k,q,t,u=this,v=function(a){return w.hasOwnProperty(a)?w[a]:a},w=u.data(),x=w.hasOwnProperty(p)?w[p]:w[p]=[],y=/[\s,]*(((?:\w+!)?([\w\/\.\-]+)(?:#[^(\s]+)?)(?:\((.*?)\))?)/g,z=[];(t=y.exec(a))!==i;)l.call(z,k=[u,t[3]]),k[n]=t[2],(q=t[4])!==h&&l.apply(k,f.call(q).map(v)),l.call(x,(k[m]=d.defer()).promise);return d.map(z,function(a){var f=a[m],h=f.resolve,i=f.reject;return c([a[n]],function(c){var f,j;f=c.apply(c,a),f.trigger?(j=e.Deferred(),d(j).yield(f).then(h,i),f.start(j)):b.apply(f,g).yield(f).then(h,i)},i),f.promise}).tap(function(a){if(0!==a[o]){var b=a.map(function(a){return a.toString()});u.attr(r,function(a,c){var d=(c===h?j:c.split(s)).concat(b);return 0!==d[o]?d.join(" "):i})}})}var h,i=null,j=Array.prototype,k=j.map,l=j.push,m="deferred",n="module",o="length",p=a.widget.$weft,q=a.widget.weave,r=a.widget.woven,s=/[\s,]+/;return function(){var a=arguments;return d.all(k.call(this,function(b){var c=e(b),d=c.attr(q)||"";return c.removeAttr(q),g.call(c,d,a)}))}}),define("troopjs-widget/unweave",["./config","troopjs-core/component/signal/finalize","when","jquery","poly/array"],function(a,b,c,d){function e(a,e){for(var i,m=this,o=m.data(),p=o.hasOwnProperty(k)?o[k]:o[k]=[],q=/[\s,]*([\w\/\.\-]+)(?:@(\d+))?/g,r=[],s=0;(i=q.exec(a))!==g;)r[s++]="^"+i[1]+"@"+(i[2]||"\\d+")+"$";return q=new RegExp(r.join("|")),c.filter(p,function(a,f){if(!q.test(a.toString()))return!1;var g,h=c.defer(),i=h.resolve,j=h.reject,k=p[f]=h.promise;return a.trigger?(g=d.Deferred(),c(g).yield(a).then(i,j),a.stop(g)):b.apply(a,e).yield(a).then(i,j),k.tap(function(){delete p[f]}).yield(!0)}).tap(function(a){if(0!==a[j]){var b=new RegExp(a.map(function(a){return"^"+a.toString()+"$"}).join("|")),c=function(a){return!b.test(a)};m.attr(l,function(a,b){var d=(b===f?h:b.split(n)).filter(c);return 0!==d[j]?d.join(" "):g})}})}var f,g=null,h=Array.prototype,i=h.map,j="length",k=a.widget.$weft,l=a.widget.woven,m=a.widget.unweave,n=/[\s,]+/;return function(){var a=arguments;return c.all(i.call(this,function(b){var c=d(b),f=c.attr(m)||"";return c.removeAttr(m),e.call(c,f,a)}))}}),define("troopjs-widget/woven",["./config","when","jquery","poly/array"],function(a,b,c){var d=null,e=Array.prototype.map,f="length",g=a.widget.$weft,h=/.*/,i=/([\w\/\.\-]+)(?:@(\d+))?/;return function(){var a=arguments[f]>0?new RegExp(e.call(arguments,function(a){var b;return(b=i.exec(a))!==d?"^"+b[1]+"@"+(b[2]||"\\d+")+"$":d}).filter(function(a){return a!==d}).join("|")):h;return b.all(e.call(this,function(d){return b.filter(c.data(d,g)||!1,function(b){return a.test(b)})}))}}),define("troopjs-widget/component",["troopjs-dom/component","./config","./weave","./unweave","./woven"],function(a,b,c,d,e){function f(){return c.apply(this[g].find(h),arguments)}var g="$element",h="["+b.widget.weave+"]",i="["+b.widget.woven+"]";return a.extend({displayName:"widget/component","sig/render":f,"dom/destroy":function(){"finalize"!==this.phase&&d.call(this[g])},weave:f,unweave:function(){return d.apply(this[g].find(i),arguments)},woven:function(){return e.apply(this[g].find(i),arguments)}})}),define("troopjs-widget/application",["./component","troopjs-core/component/signal/initialize","troopjs-core/component/signal/start","troopjs-core/component/signal/stop","troopjs-core/component/signal/finalize","when"],function(a,b,c,d,e,f){var g=Array.prototype.slice,h="components";return a.extend(function(){this[h]=g.call(arguments,2)},{displayName:"widget/application","sig/initialize":function(){var a=arguments;return f.map(this[h],function(c){return b.apply(c,a)})},"sig/start":function(){var a=this,b=arguments;return f.map(a[h],function(a){return c.apply(a,b)}).then(function(){return a.weave.apply(a,b)})},"sig/stop":function(){var a=this,b=arguments;return a.unweave.apply(a,b).then(function(){return f.map(a[h],function(a){return d.apply(a,b)})})},"sig/finalize":function(){var a=arguments;return f.map(this[h],function(b){return e.apply(b,a)})},start:c,stop:e})}),define("troopjs-widget/plugin",["jquery","when","./config","./weave","./unweave","./woven","poly/array"],function(a,b,c,d,e,f){function g(b){return a(b).attr(n)!==h}var h,i=a.fn,j=a.expr,k="weave",l="unweave",m="woven",n=c.widget.woven;j[":"][m]=j.createPseudo(function(b){if(b===h)return g;for(var c,d=/[\s,]*([\w\d_\/\.\-]+)(?:@(\d+))?/g,e=[],f=0;null!==(c=d.exec(b));)e[f++]="(?:^|[\\s,]+)"+c[1]+"@"+(c[2]||"\\d+")+"($|[\\s,]+)";return d=new RegExp(e.join("|")),function(b){var c=a.attr(b,n);return c!==h&&d.test(c)}}),i[k]=d,i[l]=e,i[m]=f}),define(["troopjs-widget/version"],function(a){return a});